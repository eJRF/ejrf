<div class="modal fade create-skip-rule" id="create-skip-rule" tabindex="-1" role="dialog"
     aria-labelledby="preview_modal_label" aria-hidden="true" ng-app="questionnaireApp">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" data-ng-controller="SkipRuleController" id="skip-rule-controller">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="close-skip-rule">&times;</button>
                <h4 class="modal-title cyan"> Skip Rules</h4>
                {% if user.user_profile.region != None %}
                <p class="top-padding">You can only skip questions or subsections that belong to {{ user.user_profile.region }}</p>
                {% endif %}
            </div>
            <div ng-include="'/static/templates/skipRuleModal.html'"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $('.add-skip-rule-btn').removeClass('disabled');
    });

    var csrfToken = '{{ csrf_token }}';
    var url = "{% url 'skip_rules' %}";
    var sectionId = "{{ section.id }}",
            createSkipRuleForm = $('#create-skip-rule');

    createSkipRuleForm.on('hide.bs.modal', function (e) {
        $('.add-skip-rule-btn').addClass('disabled');
        window.location.reload()
    });

    createSkipRuleForm.on('show.bs.modal', function (e) {
       $('#sumbit-question-skip-rule').validate({rules: { 'root_question': 'required', 'response': 'required', 'skip_question': 'required'}});
       $('#sumbit-subsection-skip-rule').validate({rules: { 'subsection_root_question': 'required', 'response': 'required', 'skip_subsection': 'required'}});
    });
</script>
