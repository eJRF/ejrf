<div>
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a id="selectNewRuleTab" href="#newRuleTab" role="tab" data-toggle="tab"
                                                  data-ng-click="setActiveTab('newRuleTab')">New Question Rule</a></li>

        <li role="presentation"><a id="selectNewSubsectiongRuleTab" href="#newSubsectionRuleTab" role="tab"
                                   data-toggle="tab" data-ng-hide="subsectionTabHidden"
                                   data-ng-click="setActiveTab('newSubsectionRuleTab')">New Subsection Rule</a></li>

        <li role="presentation"><a id="selectExistingRuleTab" href="#existingRulesTab" role="tab" data-toggle="tab"
                                   data-ng-click="setActiveTab('existingRulesTab')"
                                   data-ng-hide="existingRulesTabHidden">Existing Rules</a></li>

        <li role="presentation"><a id="selectExistingGridRuleTab" href="#existingGridRulesTab" role="tab" data-toggle="tab"
                                   data-ng-hide="existingGridRulesTabHidden"
                                   data-ng-click="setActiveTab('existingGridRulesTab')">Existing Grid Rules</a></li>
    </ul>
    <div id="newRuleTab" data-ng-show="activeTab == 'newRuleTab'">
        <form method="post" class="form-horizontal" id="sumbit-skip-rule" name="skipForm"
              data-ng-submit="submitQuestionForm()">
            <div class="modal-body question-group indent">
                <div data-ng-class="skipResult.className" class="alert" data-ng-show="skipResult.show">
                    {{ skipResult.message }}
                </div>

                <input name="subsection_id" type="hidden" data-ng-model="skipRule.subsectionId"
                       value="{{ subsectionId }}"/>

                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Root Question</label>

                    <div class="col-sm-7 center-fields">
                        <select required name="root_question" id="root-question"
                                data-ng-model="skipRule.rootQuestion"
                                data-ng-options="q.fields.text for q in questions | filter: {fields:{answer_type: 'MultiChoice'}} | filter:filterQuestions">
                            <option value="">Select Root Question</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Response</label>

                    <div class="col-sm-7 center-fields">
                        <ul>
                            <li data-ng-repeat="option in skipRule.rootQuestion.options">
                                <label style="display:block;">
                                    <input type="radio" name="response" required
                                           data-ng-model="skipRule.questionResponse"
                                           ng-value="option.pk"/>&nbsp;{{ option.fields.text }}
                                </label>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Question to Skip</label>

                    <div class="col-sm-7 center-fields">
                        <select name="skip_question" required data-ng-model="skipRule.skipQuestion"
                                data-ng-options="q.fields.text for q in questions | filter:matchSelectedQuestion | filter:filterQuestions">
                            <option value="">Select Question</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a type="cancel" class="btn btn-default" data-dismiss="modal">
                    <span class="red bold"><i class="glyphicon glyphicon-remove"></i> Cancel</span>
                </a>
                <button tyep="button" class="btn btn-default" id="save-skip-rule-button"
                        data-ng-click="fns.createRule()">
                    <span class="green bold"><i class="glyphicon glyphicon-ok"></i> Done</span></button>
            </div>
        </form>
    </div>
    <div id="newSubsectionRuleTab" data-ng-show="activeTab == 'newSubsectionRuleTab'">
        <form method="post" class="form-horizontal" name="skipForm" data-ng-submit="submitSubsectionForm()">
            <div class="modal-body question-group indent">
                <div data-ng-class="skipResult.className" class="alert" data-ng-show="skipResult.show">
                    {{ skipResult.message }}
                </div>

                <input name="subsection_id" type="hidden" data-ng-model="skipRule.subsectionId"
                       value="{{ subsectionId }}"/>

                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Root Question</label>

                    <div class="col-sm-7 center-fields">
                        <select required name="subsection_root_question"
                                data-ng-model="skipRule.rootQuestion"
                                data-ng-options="q.fields.text for q in questions | filter: {fields:{answer_type: 'MultiChoice'}}">
                            <option value="">Select Root Question</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Response</label>

                    <div class="col-sm-7 center-fields">
                        <ul>
                            <li data-ng-repeat="option in skipRule.rootQuestion.options">
                                <label style="display:block;">
                                    <input type="radio" name="subsection_response" required
                                           data-ng-model="skipRule.questionResponse"
                                           ng-value="option.pk"/>&nbsp;{{ option.fields.text }}
                                </label>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">Select Subsection To Skip</label>

                    <div class="col-sm-7 center-fields">
                        <select name="skip_subsection" required data-ng-model="skipRule.subsection"
                                data-ng-options="getSubsectionTile(q) for q in subsections track by q.id">
                            <option value="">Select SubSection</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a type="cancel" class="btn btn-default" data-dismiss="modal">
                    <span class="red bold"><i class="glyphicon glyphicon-remove"></i> Cancel</span>
                </a>
                <button tyep="button" class="btn btn-default" id="save-subsection-skip-rule-button"
                        data-ng-click="fns.createRule()">
                    <span class="green bold"><i class="glyphicon glyphicon-ok"></i> Done</span></button>
            </div>
        </form>
    </div>
    <div id="existingRulesTab" data-ng-show="activeTab == 'existingRulesTab'">
        <div class="modal-body">
            <div class="question-group indent">
                <div data-ng-class="deleteResult.className" class="alert" data-ng-show="deleteResult.show">
                    {{ deleteResult.message }}
                </div>
                <div data-ng-repeat="rule in existingRules | orderBy:'id'" class="existingRule">
                    <button  id="delete-rule-{{ rule.id }}" class="btn btn-default pull-right" value="delete" data-ng-click="deleteRule(rule)" data-ng-show="rule.can_delete">
                        <span class="red bold"><span class="glyphicon glyphicon-remove"></span> Delete</span>
                    </button>
                    <div class="form-group" style="display:none;"><label class="col-sm-3 control-label">Rule
                        ID</label>{{ rule.id }}
                    </div>
                    <div class="form-group"><label class="col-sm-2 control-label">Root
                        Question</label>{{ rule.root_question }}
                    </div>
                    <div class="form-group"><label class="col-sm-2 control-label">Response</label>{{ rule.response }}
                    </div>
                    <div class="form-group" data-ng-show="rule.skip_question !== Null"><label
                            class="col-sm-2 control-label">Question to Skip</label>{{ rule.skip_question }}
                    </div>
                    <div class="form-group" data-ng-show="rule.skip_subsection !== Null"><label
                            class="col-sm-2 control-label">Subsection to Skip</label>{{ rule.skip_subsection }}
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a type="cancel" class="btn btn-default" data-dismiss="modal">
                <span class="red bold"><i class="glyphicon glyphicon-remove"></i> Close</span>
            </a>
        </div>
    </div>
    <div id="existingGridRulesTab" data-ng-show="activeTab == 'existingGridRulesTab'">
        <div class="modal-body">
            <div class="question-group indent">
                <div data-ng-class="deleteResult.className" class="alert" data-ng-show="deleteResult.show">
                    {{ deleteResult.message }}
                </div>
                <div data-ng-repeat="rule in existingGridRules | orderBy:'id'" class="existingRule">
                    <button id="delete-grid-rule-{{ rule.id }}" class="btn btn-default pull-right" value="delete" data-ng-click="deleteRule(rule)">
                        <span class="red bold"><span class="glyphicon glyphicon-remove"></span> Delete</span>
                    </button>
                    <div class="form-group" style="display:none;"><label class="col-sm-3 control-label">Rule
                        ID</label>{{ rule.id }}
                    </div>
                    <div class="form-group"><label class="col-sm-2 control-label">Root
                        Question</label>{{ rule.root_question }}
                    </div>
                    <div class="form-group"><label class="col-sm-2 control-label">Response</label>{{ rule.response }}
                    </div>
                    <div class="form-group" data-ng-show="rule.skip_question !== Null"><label
                            class="col-sm-2 control-label">Question to Skip</label>{{ rule.skip_question }}
                    </div>
                    <div class="form-group" data-ng-show="rule.skip_subsection !== Null"><label
                            class="col-sm-2 control-label">Subsection to Skip</label>{{ rule.skip_subsection }}
                    </div>
                    <hr/>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a type="cancel" class="btn btn-default" id="existing-grid-close-button" data-dismiss="modal">
                <span class="red bold"  ><i class="glyphicon glyphicon-remove" ></i> Close</span>
            </a>
        </div>
    </div>


</div>
